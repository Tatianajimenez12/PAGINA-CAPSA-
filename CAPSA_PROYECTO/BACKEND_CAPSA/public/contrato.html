<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAPSA - Inicio</title>
    <link rel="stylesheet" href="contrato.css">
    <link rel="stylesheet" href="footer.css">
    <link rel="stylesheet" href="styles.css">

    <link rel="shortcut icon" href="logocapsapestaña.png">
    <link rel="stylesheet" href="whatsapp_button.css">
    <link rel="stylesheet" href="menu.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
</head>

<body class="p-3 m-0 border-0 bd-example m-0 border-0">
    <!-- Fondo de pantalla -->
    <div class="background"></div>

    <!-- Encabezado con el logo y menú -->
    <header>
        <div class="navbar-container">
            <a href="index.html">
                <div class="navbar-logo">
                    <img src="logos_capsa.png" alt="Logo CAPSA" style="height: 80px; width: auto;">
                </div>
            </a>
        </div>
        <nav class="navbar navbar-expand-lg custom-navbar">
            <div class="container">
                <button class="navbar-toggler text-black" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
                        <li class="nav-item"><a class="nav-link" href="Quienes somos.html">¿Quiénes somos?</a></li>
                        <li class="nav-item"><a class="nav-link" href="nuestro-personal.html">Nuestro personal</a></li>
                        <li class="nav-item"><a class="nav-link" href="convenios.html">Convenios</a></li>
                        <li class="nav-item"><a class="nav-link" href="contrato.html">Únete con nosotros</a></li>
                        <li class="nav-item"><a class="nav-link" href="reseñas.html">Comparte tu opinión</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="d-flex justify-content-between align-items-start formulario-container">
        <div class="formulario-panel">
            <h1 class="text-center mb-4">Únete a nuestro equipo de especialistas en salud y educación inclusiva</h1>
            <p class="text-center mb-4">Estamos en búsqueda de profesionales comprometidos para ofrecer atención integral que combine cuidado de calidad con apoyo educativo. Si eres un especialista en salud domiciliaria interesado en contribuir al bienestar de estudiantes, docentes, personal administrativo y sus familias, ¡postúlate aquí!</p>
    
            <form id="verificarFormulario" action="/postulaciones" method="POST" enctype="multipart/form-data">
                <fieldset>
                    <legend>Datos personales</legend>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="nombreCompleto" class="form-label">Nombre completo</label>
                            <input type="text" class="form-control" id="nombreCompleto" name="nombreCompleto" placeholder="Ingresa tu nombre completo" required>
                        </div>
                        <div class="col-md-6">
                            <label for="correoElectronico" class="form-label">Correo electrónico</label>
                            <input type="email" class="form-control" id="correoElectronico" name="correoElectronico" placeholder="Ingresa tu correo" required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="telefonoContacto" class="form-label">Teléfono de contacto</label>
                            <input type="tel" class="form-control" id="telefonoContacto" name="telefonoContacto" placeholder="Ingresa tu teléfono" required>
                        </div>
                        <div class="col-md-6">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" class="form-control" id="direccion" name="direccion" placeholder="Ingresa tu dirección">
                        </div>
                    </div>
                </fieldset>
    
                <fieldset>
                    <legend>Información profesional</legend>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="especialidad" class="form-label">Especialidad</label>
                            <select class="form-select" id="especialidad" name="especialidad" required>
                                <option value="">Seleccione una especialidad</option>
                                <option value="cuidados_postoperatorios">Cuidados postoperatorios y paliativos</option>
                                <option value="cuidados_geriátrico">Cuidados para adultos mayores (geriátricos)</option>
                                <option value="cuidados_generales">Cuidados generales de enfermería</option>
                                <option value="cuidados_pediatricos">Cuidados pediátricos</option>
                                <option value="cuidados_rehabilitacion">Rehabilitación y terapia física</option>
                                <option value="psicologia">Psicología</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="añosExperiencia" class="form-label">Años de experiencia</label>
                            <input type="number" class="form-control" id="añosExperiencia" name="añosExperiencia" placeholder="Ingresa tus años de experiencia" required>
                        </div>
                    </div>
                </fieldset>
    
                <fieldset>
                    <legend>Documentos adjuntos</legend>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="cv" class="form-label">Currículum Vitae (CV)</label>
                            <input type="file" class="form-control" id="cv" name="cv" accept="application/pdf" required>
                        </div>
                        <div class="col-md-6">
                            <label for="cedulaProfesional" class="form-label">Cédula profesional o certificaciones</label>
                            <input type="file" class="form-control" id="cedulaProfesional" name="cedulaProfesional" accept="application/pdf" required>
                        </div>
                    </div>
                </fieldset>
    
                <fieldset>
                    <legend>Disponibilidad</legend>
                    <div class="row mb-3">
                        <div class="col-md-12">
                            <label for="horariosDisponibles" class="form-label">Horarios disponibles</label>
                            <select multiple class="form-select" id="horariosDisponibles" name="horariosDisponibles[]" required>
                                <option value="mañana">Mañana</option>
                                <option value="tarde">Tarde</option>
                                <option value="noche">Noche</option>
                            </select>
                        </div>
                    </div>
                </fieldset>
    
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary">Enviar postulación</button>
                </div>
            </form>
        </div>
    
        <div class="formulario-image">
            <img src="cuidadora_alumno.jpg" alt="cuidadora y alumno" class="img-fluid">
            <img src="cuidador_profesor.jpg" alt="cuidador y profesor" class="img-fluid">
            <img src="cuidador_familiar.jpg" alt="cuidador y familiar" class="img-fluid">
        </div>
    </div>

    <!-- Modal de Confirmación -->
<div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalLabel">¡Éxito!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                ¡Postulación exitosa!
                Valoramos tu tiempo y talento. Te avisaremos si pasas a la siguiente etapa.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>    

    <!-- Botón de WhatsApp -->
    <div class="whatsapp-container">
        <div class="whatsapp-message">Contáctate con nosotros</div>
        <a href="javascript:void(0)" class="whatsapp-button" id="whatsappButton">
            <img src="whatsapp.png" alt="WhatsApp">
        </a>
        <div class="whatsapp-qr" id="whatsappQR" style="display: none;">
            <div class="qr-content">
                <img src="QR.jpeg" alt="Código QR de WhatsApp">
                <p>¡Hola! Escríbenos para más información</p>
                <a href="https://wa.me/525548176178" target="_blank" class="open-chat">Ir al chat</a>
                <button id="closeQR">Cerrar</button>
            </div>
        </div>
    </div>
     <!-- Site footer -->
     <footer class="site-footer">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 col-md-6">
              <h6>Acerca de CAPSA</h6>
              <p class="text-justify">CAPSA <i>CUIDADO CON AMOR Y PROFESIONALISMO</i> es una iniciativa para brindar servicios de cuidado especializado en el hogar. Nos enfocamos en proporcionar atención personalizada y de calidad para adultos mayores, pacientes postoperatorios y personas que requieren cuidados especiales. Ofrecemos servicios básicos, intermedios y avanzados adaptados a cada necesidad.</p>
            </div>
      
            <div class="col-xs-6 col-md-3">
              <h6>Nuestros Servicios</h6>
              <ul class="footer-links">
                <li><a href="serviciosbasicos.html">Cuidados Básicos</a></li>
                <li><a href="serviciosintermedios.html">Cuidados Intermedios</a></li>
                <li><a href="serviciosavanzados.html">Cuidados Avanzados</a></li>
                <li><a href="nuestro-personal.html">Personal Calificado</a></li>
                <li><a href="convenios.html">Convenios Especiales</a></li>
                <li><a href="contrato.html">Únete a Nuestro Equipo</a></li>
              </ul>
            </div>
      
            <div class="col-xs-6 col-md-3">
              <h6>Enlaces Rápidos</h6>
              <ul class="footer-links">
                <li><a href="index.html">Inicio</a></li>
                <li><a href="Quienes somos.html">¿Quiénes somos?</a></li>
                <li><a href="contacto.html">Contáctenos</a></li>
                <li><a href="reseñas.html">Opiniones</a></li>
              </ul>
            </div>
          </div>
          <hr>
        </div>
        <div class="container">
          <div class="row">
            <div class="col-md-8 col-sm-6 col-xs-12">
              <p class="copyright-text">Copyright &copy; 2024 Todos los derechos reservados por 
                <a href="index.html">CAPSA</a>.
              </p>
            </div>
      
            <div class="col-md-4 col-sm-6 col-xs-12">
              <ul class="social-icons">
                <li><a class="facebook" href="https://www.facebook.com/profile.php?id=61572351128914"><i class="bi bi-facebook"></i></a></li>
                <li><a class="twitter" href="#"><i class="bi bi-twitter"></i></a></li>
                <li><a class="instagram" href="#"><i class="bi bi-instagram"></i></a></li>
                <li><a class="whatsapp" href="https://wa.me/525548176178"><i class="bi bi-whatsapp"></i></a></li>   
              </ul>
            </div>
          </div>
        </div>
      </footer>
    <!-- Scripts -->
    <script>
        document.getElementById('formulario-clientes').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Control de envíos duplicados
            if (this.isSubmitting) return;
            this.isSubmitting = true; // Usamos una propiedad del formulario
            
            const form = this;
            const submitButton = form.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            
            const formData = {
                name: form.elements['name'].value,
                phone: form.elements['phone'].value,
                correo: form.elements['correo'].value,
                servicio: form.elements['servicio'].value,
                comunicacion: form.elements['comunicacion'].value,
                comentarios: form.elements['comunicacion'].value
            };
        
            fetch('http://localhost:3000/clientes', {
                method: 'POST',
                body: JSON.stringify(formData),
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) throw new Error('Error en el servidor');
                return response.text();
            })
            .then(result => {
                console.log('Respuesta del servidor:', result);
                new bootstrap.Modal(document.getElementById('confirmationModal')).show();
                form.reset();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al enviar: ' + error.message);
            })
            .finally(() => {
                form.isSubmitting = false; // Liberamos el formulario
                submitButton.disabled = false;
            });
        });
        </script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const whatsappButton = document.getElementById("whatsappButton");
            const whatsappQR = document.getElementById("whatsappQR");
            const closeQRButton = document.getElementById("closeQR");

            if (whatsappButton && whatsappQR && closeQRButton) {
                whatsappButton.addEventListener("click", () => {
                    whatsappQR.style.display = whatsappQR.style.display === "none" ? "block" : "none";
                });

                closeQRButton.addEventListener("click", () => {
                    whatsappQR.style.display = "none";
                });
            } else {
                console.error("Elementos del botón de WhatsApp no encontrados en el DOM.");
            }
        });
    </script>
</body>

</html>